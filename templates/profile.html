<!DOCTYPE html>
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='profile.css')}}" />
<head>
    <script>
        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:3283623,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
</head>
<html>


<header>
    <div class="header">
        <div style="display: flex; justify-content: space-between; align-items: center;">

            <a href="/">
                <img class="header_img" src="{{home_icon}}" alt="FeaturedImage">
            </a>

            <div class="rustymemories">Rusty Memories</div>

            <a href="/users/search">
                <img class="header_img" src="{{search_icon}}" alt="FeaturedImage">
            </a>
        </div>
    </div>
</header>

<div class="all_page">
    <div class="top_part">
        <div class="left_part">
            <form action="/profile" method="POST" enctype=multipart/form-data>
                <img onmouseover="myFunction()" class="carouselimg" src="https://rustymemories.s3.eu-west-3.amazonaws.com/{{profile_image}}" alt="FeaturedImage">

                <div class="popup" style="display: flex; justify-content: center;">
                    <div class="popuptext" id="myPopup" style="display: flex; justify-content: space-around; align-items: center; padding: 10px;">
                        <input class="file_button" type=submit value=Upload id="file_button">
                        


                        <div class="file-input" style="rotate: 180deg;" id="upload_button">
                            <input
                              type="file"
                              name="file"
                              id="file-input"
                              class="file-input__input"
                              accept="image/jpg, image/jpeg, image/png"
                            />
                            <label class="file-input__label" for="file-input">
                              <svg
                                aria-hidden="true"
                                focusable="false"
                                data-prefix="fas"
                                data-icon="upload"
                                class="svg-inline--fa fa-upload fa-w-16"
                                role="img"
                                viewBox="0 0 512 512"
                              >
                                <path
                                  fill="currentColor"
                                  d="M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"
                                ></path>
                              </svg>
                              <span>Change Image</span></label
                            >
                        </div>

            </form>

                        <script>
                    
                            var file_button = document.getElementById("file_button");
                            var upload_button = document.getElementById("upload_button");
                            file_button.style.visibility='hidden'

                            // if file was uploaded to input "file-input__input" javascript
                            // will change the visibility of the "file_button" to visible

                            document.getElementById("file-input").onchange = function() {
                                file_button.style.visibility='visible'
                            };

                        </script>

                    </div>
                </div>
                  
                <script>
                  // When the user hovers on div, open the popup
                    function myFunction() {
                        var popup = document.getElementById("myPopup");
                        popup.classList.toggle("show");
                    }
                </script>
                


            <div class="username">
                
                <div class="username_name" style="flex-wrap: wrap;">
                    <div style="font-size: 30px; width: 100%; margin-left: 10px;">Welcome, </div>
                    <div style="margin-left: 5px;">{{user}}</div>
                    <img class="settings_icon_profile" src="{{settings_icon}}" alt="settings_icon" height="30">
                </div>


                <form action="/profile" method="POST">
                    <div style="display: flex; width: 100%;">
                        <textarea minlength="10" maxlength="150" name="bio" id="bio" class="bio">{{bio}}</textarea>
                    </div>
                    <input class="bio_css_button" type="submit" id="bio_button" name="bio_button">
                </form>
            </div>
        </div>
        <div class="right_part">
            
            <div class="left_box">
                <div class="left_box_title">
                    Fun fact about me
                </div>
                <div class="left_box_text">
                    <form action="/profile" method="POST">
                        <div style="display: flex; justify-content: center;">
                            <textarea minlength="10" maxlength="100" id="fun_fact" name="fun_fact" class="fun_fact">{{fun_fact}}</textarea>
                        </div>
                        <input class="fun_fact_css_button" type="submit" id="fun_fact_button" name="fun_fact_button">
                    </form>

                    <script>
                        var fun_fact = document.getElementById("fun_fact");
                        var fun_fact_button = document.getElementById("fun_fact_button");
                        fun_fact_button.style.visibility='hidden'

                        fun_fact.addEventListener("click", function() {
                            fun_fact_button.style.visibility='visible'
                        });


                        var bio = document.getElementById("bio");
                        var bio_button = document.getElementById("bio_button");
                        bio_button.style.visibility='hidden'

                        bio.addEventListener("click", function() {
                            bio_button.style.visibility='visible'
                        });

                    </script>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="all_page2">
    <div class="middle_part">
        <div class="friends_title">
            Following ({{following_num}})
        </div>
        <div class="long_box_friends">


            {% for (following, profile) in zip(following, following_profile_url) %}
            
                <div class="friend_box">
                        <div class="left_friend_pfp">
                            <a href="/users/{{following}}">
                                <div style="height: 60px; width: auto;">
                                    <img class="friend_icon" src="https://rustymemories.s3.eu-west-3.amazonaws.com/{{profile}}" alt="FeaturedImage">
                                </div>
                            </a>
                            </div>
                            <a href="/users/{{following}}">
                                <div class="friend_username">{{following}}</div>
                            </a>
                </div>


            {% endfor %}



            <div class="friend_box_view_all">View All</div>
        </div>
    </div>
</div>






<div class="all_page2">
    <div class="middle_part">


        <div class="friends_title">
            Posts
        </div>
        <div class="long_box_friends2">

            <div class="friend_box3">
                <a href="/post">
                    <img class="header_img" src="{{create_icon}}" alt="FeaturedImage">
                </a>
            </div>

            {% for (post, time, post_url) in zip(reversed(all_posts), reversed(all_post_times), reversed(all_post_urls)) %}

                <div class="friend_box2">
                    <a href="/user_posts/{{post_url}}">
                        <img class="friend_icon2" src="https://rustymemories.s3.eu-west-3.amazonaws.com/{{post}}" alt="No posts yet">
                    </a>
                        <div class="date_posted">{{time}} UTC</div>
                </div>

            {% endfor %}

        </div>
    </div>
</div>



<div style="display: flex; justify-content: center; margin-top: 60px;">
    <div ontouchstart="">
        <div class="sign_out">
        <a href="/logout">Log Out!</a>
        </div>
    </div>
</div>



<script>
    if ( window.history.replaceState ) {
        window.history.replaceState( null, null, window.location.href );
    }
</script>